<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Widevine DRM instantiation example</title>

    <script src="http://cdn.dashjs.org/latest/dash.all.min.js"></script>
    <!--dash.all.min.js should be used in production over dash.all.debug.js
        Debug files are not compressed or obfuscated making the file size much larger compared with dash.all.min.js-->
    <script src="./dash.all.debug.js"></script>
    <script src="./dash.all.debug.js.map"></script>
    <!-- <iframe src="https://cross-origin.com/public/dash/index.html" allow="autoplay"> -->

    <script class="code">
      function init() {
        const protData = {
          "com.widevine.alpha": {
            serverURL:
              "http://localhost:3001",
            httpRequestHeaders: {
              "Content-Type": 'application/octet-stream'
            }
          }
        };
        var video,
          player,
          url =
            "http://localhost:3001/public/assets/stream.mpd";

        video = document.querySelector("video");
        player = dashjs.MediaPlayer().create();
        player.initialize(video, url, true);
        player.setProtectionData(protData);
      }
    </script>

    <style>
      video {
        width: 640px;
        height: 360px;
      }
    </style>
  </head>
  <body>
    <div>
      <video controls="true"></video>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        init();
      });
    </script>
    <script src="./highlighter.js"></script>
  </body>
</html>
